language: ruby
rvm:
- 2.3.0
env:
  global:
  - AWS_INSTANCE_TYPE=t2.small
  - KITCHEN_SSH_KEY=provision.key
  - secure: Mf7MyJU3RfasOksQP3GVqdkfApsS01TJVVWuo/C70fqAMgwtzgzLzu6d+JyDfNsyFd9reSskMzVe4FNkzYB2vbmVpzTfvgckZqJodHsZSWG8ECzskjqRl5jSng2b5xk3guX3V1XpMnZI4zazw5BxALD89MIPCVRn9GMHZFYq8QYFPWQWu28Dl0rtzsE20HF2Fw9CCTSZiy2PuA0Kzyq523aETDgCnSDl9tsWF+cpYXDqbBZxkzCAaFIUgZdT9Lfh5dqNhbClCL3SJmHFc4P34lXGO4b1somH8h0H5lQ/MrAOkAkh/Zd8szIgVWodf024zxYx70DHRkL5V0ZO4A1xPOKlHy7hC+6stiBimTMey0+8Teu6tS2n/xp9rEFG+NDyMVdLMhni+4L1grTx8+DCqStE+YAejBlTyawYWgQxELFTolamHRG0b4GQaLEQZz1cAmgxxusN5RAmTNnijGNVQ2lY4rJAbj44wOa8nl3A1McKFBR9OznpYXizlj1ET1PC6S+uvSvhFOu0y6yO7xADEnhG2egHjDM5siYvnalnjBA4q1ATrtwgHpFwNjGG2Gl7gj22VdpPCvrsjr27wE3/w+cSJpVnkUhT6v8I/LGxfGRNZLpUNg6zfP9sG0m7EDU874YPKLxuuIdw9JfaGsNHRifr6ysW2M42Ybn672h0OAc=
  - secure: kzrItFz4Vcax1ytD2MGwVKqg8VPr0DIih9rqY1FhuGlbTcf8iqCtHvarYtTfIxniguLmh6OVUVfjckSHyta15oxQNy1dR8CmE/dHrnwDCsdthlGWP7jVEtBOk7FMmPHSfZcKzvSMcyazJydOB1gV6jths65AE1PnHqG4Muf0g+HCrPXRgGyU3FFUqpGqIy+wz3ukyXY/UrWrbtUvIH0U326g5SgORZf7rEXZPRkoVDR2XP3NuRX4wbpMaQ2IGV5DrII3NcWKgM8rhyr7X44zX1P4hArfPKhw0FKKCAGvFRhf3gSvB2qfFrUXNVl+lL8qnyILt8FgvNIZOX51OLdEK7aHr5vXwVZBq1oBUQu+bR22mqF6ydVnu77n5ILq1hWwAor4jAqTRzkC0nqvlPPTz3GpoAzEWZ3vqBLr/7HpmXoea/sJuX9XlmjO/tczwIdivQ4WvAc/R2e5PD80FQVRA4zfvIVL3TnNr/X2b/o0NjOkm1y2x2P7iLG1xg8K1VujQizi2RCno+umkk+v88LOjU7mVZ4xAFzPKhDyS8aG5DMRxJXMBc3g7oaheei1Q/p14WAgSS1zUJsFIUkEEol7sB/wM2czGmHl5b5xL/Mv1grlnUghtlsbmUMXm7hLHOPAVGsrz6zF8zgFaqLa3+qCxvmRdsptPNhu8jNeu/gl0x4=
  - secure: RmNkiLV3li7bRxi3ii5y0pXdylg51twl45VVt5EVaDUtUNux7ur+tdJiRRJ82fEolJo3z+l+sH5TQgVgY7MeaHycPFpBs2ecpdD5lWNxlw5Wt9DH0IPtk1WI0BUEwqnp/Zrlr0gS9MIagXxHgS+Il55cMq8tRYDmLG+935KnoQwaH+U7g6Qtau0TdnQxj3rs7TSDO/heo+nas9C/px7wvhnUgOrAAfQqJEah8GcjiqRuTiHnhKrIpI+b8+BA3vpsG9HMSpB5GQrYyguCGwv4aANtN+VSSWEYUWdgNGvYLny5m9o4IAOviwNk0Yk/SrI7pNbGG7JQw57MkkN4KG+XP1Lp56vuUrpN6X3jB35RC0zYoYlN/oK1JIg4qFxTZTtKG70FTXFBzrSqRF5YUuVXpoDLTpwJGZeTbXJmqUTsWarMs1nP/kPtX9+yvPQMUjYNV52iWg46DTscKwMXWp0Nqeo7LNpVaU2wlLpke6qBtUGUsr78+Ebbi2zHhJ9dqu+cSzi3/671cwR6VAXEQ7kwjNAesxWPX5WHfe2c11ndTmxoYy5PcAxuJnbqZMieoR8SjhhnjcHv7Dm9EMCKgOfr6YEP5hXzE7kMsxP0ricNrqFSzfvH126hSXts7uGU7PBNLhtBkFGdJVSwYEhXa/wqVOAC9vy4oua1SNEa7vapC+I=
  - secure: VpS2VSImSFbVOGAdKtBpmm6m5S7WKhfqSrsJILdHnWB6HUsf9JUXr6gpB0sK/cyyOY2Uxkm0OvOWBbRn2Sy+0wn6vt+u/7OIWVpcE0GYGRB/u3meuReukJnHkDpDV1eDk6oiEgyA3Efhj5eckQNeVXY+799yppZRHRMq5AUkDrGWAekS1oOp4/VsWHOJ8R1vOsmKSqlLfmYDgr14yCOs6Eq/TQzfJxCfJ8Ijf1RpFjmH9vIF967z7yp6pTQZlAcweF7TNGjlftKEbKjPMl4gia3Ht8LvVJ+UC7Nn7aHh20Ps1V7225JXBRM80qhPtg8Yut1JqnhXLlwbsOZfWWjgJoizKh/TGYpIuSsssCJoKomSgQxKOC7YbuQD9hfOMULset7WEWfA7gXYIBO+kfqqSmQwlZl02swx2JXiJvYtA4fXJ5xpkgSpToHHtfz1TtcqARfAxR9WnMZrniBUcKBkxJ3+qHvlyg4Gt+VSMung7wByhq8plJHZ0XjbzaBfpp6Giqd+teHIamu3u9qogVRvO7cwul+KLHr4DdDluuZGSLUHOfDAeCLCRLCoD4mddM0JBjPDgA1xYCAnjAjESyB2xg6kgOZ62Hr/RzEpaDCQsy+xSQ4mHWyCnEKGCbO0xcvT2whQ1NrMlsC5kaPEAzGqfqaNwYIjfkqzpYCeAsThoaA=
  - secure: lHrqG0efbsJf5rSmz3GxcFpUURqUq9x1JCCTRUYEGf7n4mSAl3/XVFOeR1gybKVfAkeOVDdybGKFvvxcyjN2y4C/gkPpCXJhR9zAViLtq4LIil9TNx6qV6MfJpJmYbWng+eVWvaeThFyclLxIMHa8fnmGy93coT7MdxhxVPzBwty3ocS3IZOgAfsFX5SIfcePIud+sp1SxDiMWnfk2ZVQkirHkl4bV51ufXRikomtRliS/deal7On9iy4oeRwEsjzceICeh7A9A4zYG6S9NZozri0xQIZmrgP2M8AqFD6xpz/hdrRfq9EVXbcxAtJKsy2fJpsH7+p5+2K9c3TyKSi4eOm7Tbj4Rm01TIH3rYw8wBsuSXc427Y+Yl4LELRXSxMpE5U2SIFpkOhH1K1FCZYSL9D9ZsJIFmHH3MKo46aMrMpKIN8mLZi3OM8UJ8xtJ/+jMLM94FHWV/btIA/P/J1S1FMj5AW77ymr/m8XMztqkk1VmQ3U3llh1ZobYsP+AKlpZylcAmUTblx6O435kyLnGEyBbFIwoS4d8rxp/0qCw4jmLz7C5Fh8pAidurD01Su3rMKgv0HOHJ+LJsM0jCG5f9hXPrlvt8x4FNrRZx9mqDrd6CNepxV/op1vtv7lPelmyKAJAcQeLiCXjnEFRX71nk2UparC+UQyivfBgSs0Q=
  - secure: dLyzUDp9a5S5Z8+fCx+GX1pxvjoyjbLVrV+tfJ1ekmQKFSbCg2kftvoVJ06HckxAsgk2hyZFYaQr5hoYEg2k8LoVeyOJJgFVef+7/wEoGN3l92plqjLFt9Jjsqn0jjCJjexncI1p3Cb7TaU+NifzBuWkOwH3D3KVao/Ei0jFkVxetG8fdMQ0KL8q8FH1DlWD0yurBOhRYcoZktFG27kfZ1eQRTH1TWbEusf1I5KLJHgOTzIh5F/K2IcCwL704qzSy7v6xwLURY+1/XtRq+DpUYhAH37uT1ai7xyjs/LGy2NB2qcDFs2vRv56eAxF5N2KDcieLFpSzzb4mdT+bPHhRLdZ5EKbKyVyDw2I8GsUHFx7XqJxUG4xd34yiqvns64XUTs6Yvx76ls60+3GzVkgE5yLIMBK9J1wwecvvI4XFzsLdXOiMojaW2NJ1mx4S0YEgYirVV6WPP4qBmN7rzkENaiULKLRSxbjORoC3Fzyx1I/SvRa85+BzbHAxnGrf9Fl+DFmG2xT2vTouV0EZxtWMBPXedEmKCvho/nJAmAm6ElM2M4CgYYmFujK16CGrduZFGNNBPW1RELT2Heu14VsHKsod88OwK0HnVLMPk7TngP7mb4AxrhxGUQQk5l+euu/FCaJ4ieX8GwxVmZxd8R+TW/RNQNeZ/O9IFr+U3rfWjI=
before_install:
- openssl aes-256-cbc -K $encrypted_c927e4b32ed8_key -iv $encrypted_c927e4b32ed8_iv
  -in provision.key.enc -out provision.key -d
- bundle install
script:
- bundle exec rake integration:cloud
after_script:
- bundle exec rake integration:cloud:sgroup-destroy
